@page "/weatherFetch"
@inject HttpClient Http

@code {
    private WeatherData? weather;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            weather = await Http.GetFromJsonAsync<WeatherData>("https://api.weatherapi.com/v1/current.json?key=YOUR_API_KEY&q=London");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching weather data: {ex.Message}");
        }
    }

    public class WeatherData
    {
        public required Location Location { get; set; }
        public required Current Current { get; set; }
    }

    public class Location
    {
        public required string Name { get; set; }
        public required string Country { get; set; }
    }

    public class Current
    {
        public required double Temp_c { get; set; }
        public required Condition Condition { get; set; }
    }

    public class Condition
    {
        public required string Text { get; set; }
        public required string Icon { get; set; }
    }
    public class User
    {
        public required int Id { get; set; }
        public required string Name { get; set; }
        public required string Email { get; set; }
        public required Address Address { get; set; }
    }

    public class Address
    {
        public required string Street { get; set; }
        public required string Suite { get; set; }
        public required string City { get; set; }
        public required string Zipcode { get; set; }
    }
}

<h3>Weather Information</h3>

@if (weather is not null)
{
    <div>
        <h4>@weather.Location.Name, @weather.Location.Country</h4>
        <p>Temperature: @weather.Current.Temp_CÂ°C</p>
        <p>Condition: @weather.Current.Condition.Text</p>
        <img src="https:@weather.Current.Condition.Icon" alt="Weather Condition" />
    </div>
}
else
{
    <p><em>Loading weather data...</em></p>
}

@if (weather is null)
{
    <p><em>Unable to fetch weather data. Please try again later.</em></p>
}

